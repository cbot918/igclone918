{"version":3,"sources":["components/Navbar.js","components/screens/Home.js","components/screens/SignIn.js","components/screens/Profile.js","components/screens/Signup.js","components/screens/CreatePost.js","reducers/useReducer.js","components/screens/UserProfile.js","components/screens/SubscribeUserPosts.js","App.js","reportWebVitals.js","index.js"],"names":["NavBar","searchModal","useRef","useState","search","setSearch","userDetails","setUserDetails","useContext","UserContext","state","dispatch","history","useHistory","useEffect","M","Modal","init","current","className","to","id","style","color","onClick","localStorage","clear","type","push","ref","placeholder","value","onChange","e","query","target","fetch","method","headers","body","JSON","stringify","then","res","json","results","user","map","item","_id","getInstance","close","email","Home","data","setData","getItem","result","posts","padding","postedBy","name","float","postid","console","log","newData","filter","src","photo","likes","includes","postId","catch","err","length","title","comments","record","fontWeight","text","onSubmit","preventDefault","SignIn","password","setPassword","setEmail","test","error","toast","html","classes","setItem","token","payload","Profile","mypics","setPics","image","setImage","mypost","FormData","append","pic","url","maxWidth","margin","borderBottom","display","justifyContent","width","height","borderRadius","followers","following","file","files","alt","setName","undefined","setUrl","uploadFields","message","PostData","uploadPic","CreatePost","setTitle","setBody","textAlign","postDetails","initialState","reducer","action","userProfile","setProfile","userid","useParams","showfollow","setShowFollow","followId","prevState","unfollowId","newFollower","createContext","Routing","parse","exact","path","Signup","UserProfile","SubscribeUserPosts","App","useReducer","Provider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d142a5e6.chunk.js","sourcesContent":["import React, { useContext, useRef, useEffect, useState } from 'react'\nimport { Link, useHistory } from 'react-router-dom'\nimport { UserContext } from '../App'\nimport M from 'materialize-css'\n\nconst NavBar = () => {\n  const searchModal = useRef(null)\n  const [search, setSearch] = useState('')\n  const [userDetails,setUserDetails] = useState([])\n  const { state, dispatch } = useContext(UserContext)\n  const history = useHistory()\n  useEffect(() => {\n    M.Modal.init(searchModal.current)\n  }, [])\n  const renderList = () => {\n    if (state) {\n      return [\n        <li key=\"1\"><i data-target=\"modal1\" className=\"large material-icons modal-trigger\" style={{ color: \"black\" }}>search</i></li>,\n        <li key=\"2\"><Link to=\"/profile\">自己</Link></li>,\n        <li key=\"3\"><Link to=\"/create\">PO文</Link></li>,\n        <li key=\"4\"><Link to=\"/myfollowingpost\">追蹤</Link></li>,\n        <li key=\"5\">\n          <button className=\"btn #c62828 red darken-3\"\n            onClick={() => {\n            localStorage.clear()\n              dispatch({ type: \"CLEAR\" })\n              history.push('/signin')\n            }}\n          >\n            Logout\n          </button>\n        </li>\n      ]\n    } else {\n      return [\n        <li key=\"6\"><Link to=\"/signin\">Signin</Link></li>,\n        <li key=\"7\"><Link to=\"/signup\">Signup</Link></li>\n      ]\n    }\n  }\n\n  const fetchUsers = (query)=>{\n    setSearch(query)\n    fetch('/search-users',{\n      method:\"post\",\n      headers:{\n        \"Content-Type\":\"application/json\"\n      },\n      body:JSON.stringify({\n        query\n      })\n    }).then(res=>res.json())\n    .then(results=>{\n      setUserDetails(results.user)\n    })\n  }\n\n  return (\n    <nav>\n      <div className=\"nav-wrapper white\" >\n        <Link to={state ? \"/\" : \"/signin\"} className=\"brand-logo left\">\n          SheepCloud\n          {/* {console.log(\"********** in Navbar.js conditioning **************\")} */}\n        </Link>\n        <ul id=\"nav-mobile\" className=\"right \">\n          {renderList()}\n        </ul>\n      </div>\n      <div id=\"modal1\" className=\"modal\" ref={searchModal} style={{ color: \"black\" }}>\n        <div className=\"modal-content\">\n          <input\n            type=\"text\"\n            placeholder=\"search users\"\n            value={search}\n            onChange={(e) => fetchUsers(e.target.value)}\n          />\n\n          <ul className=\"collection\">\n            {userDetails.map(item=>{\n              return <Link to={item._id !== state._id ? \"/profile/\"+item._id:\"/profile\"} onClick={()=>{\n                M.Modal.getInstance(searchModal.current).close()\n                setSearch('')\n              }}><li className=\"collection-item\">{item.email}</li></Link>\n            })}\n\n          </ul>\n        </div>\n        <div className=\"modal-footer\">\n          <button className=\"modal-close waves-effect waves-green btn-flat\"onClick={()=>setSearch('')}>close</button>\n        </div>\n      </div>\n    </nav>\n  )\n}\n\nexport default NavBar","import React,{useState,useEffect,useContext} from 'react'\nimport {UserContext} from '../../App'\nimport {Link} from 'react-router-dom'\n\nconst Home = ()=>{\n    const [data,setData] = useState([])\n    const {state,dispatch} = useContext(UserContext)\n    useEffect(()=>{\n        fetch('/allpost',{\n            headers: {\n                \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\n            }\n        }).then(res=>res.json())\n        .then(result=>{\n            // console.log(result)\n            setData(result.posts)  \n        })\n    },[])\n\n    const likePost = (id)=>{\n        fetch('/like',{\n            method:\"put\",\n            headers:{\n                \"Content-Type\":\"application/json\",\n                \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\n            },\n            body:JSON.stringify({\n                postId:id\n            })\n        }).then(res=>res.json())\n        .then(result=>{\n            //console.log(result)\n            const newData = data.map(item=>{\n                if(item._id==result._id){\n                    return result\n                }else{\n                    return item\n                }\n            })\n            setData(newData)\n        }).catch(err=>{\n            console.log(err)\n        })\n    }\n\n\n    const unlikePost = (id)=>{\n        fetch('/unlike',{\n            method:\"put\",\n            headers:{\n                \"Content-Type\":\"application/json\",\n                \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\n            },\n            body:JSON.stringify({\n                postId:id\n            })\n        }).then(res=>res.json())\n        .then(result=>{\n            const newData = data.map(item=>{\n                if(item._id==result._id){\n                    return result\n                }else{\n                    return item\n                }\n            })\n            setData(newData)\n        }).catch(err=>{\n            console.log(err)\n        })\n    }\n\n\n    const makeComment = (text,postId)=>{\n        fetch('/comment',{\n            method:\"put\",\n            headers:{\n                \"Content-Type\":\"application/json\",\n                \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\n            },\n            body:JSON.stringify({\n                postId,\n                text\n            })\n        }).then(res=>res.json())\n        .then(result=>{\n            console.log(result)\n            const newData = data.map(item=>{\n                if(item._id==result._id){\n                    return result\n                }else{\n                    return item\n                }\n            })\n            setData(newData)\n        }).catch(err=>{\n            console.log(err)\n        })\n    }\n    \n    const deletePost =(postid) =>{\n        fetch(`/deletepost/${postid}` ,{\n            method:\"delete\",\n            headers:{\n                \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\n            }\n        }).then(res=>res.json())\n        .then(result=>{\n            console.log(result)\n            const newData = data.filter(item=>{\n                return item._id !== result._id\n            })\n            setData(newData)\n        })\n    }\n\n\n\n    return (\n        <div className=\"home\">\n            {\n                data.map(item=>{\n                    return(\n                        <div className=\"card home-card\" key={item._id}>\n                          \n                            <h5 style={{padding:\"5px\"}} >\n                              <Link to={item.postedBy._id !== state._id?\"/profile/\"+item.postedBy._id:\"/profile\"}>{item.postedBy.name}</Link> \n                              \n                              {item.postedBy._id == state._id && \n                            <i \n                              className=\"material-icons\" \n                              style={{float:\"right\"}}\n                              onClick={()=>deletePost(item._id)}\n                            >\n                              delete\n                            </i>\n                            }\n                            </h5>\n\n                            <div className=\"card-image\">\n                                <img src={item.photo}/>\n                            </div>\n                            <div className=\"card-content\">\n                                <i className=\"material-icons\" style={{color:\"red\"}}>favorite</i>\n                                {item.likes.includes(state._id)\n\n                                ?\n                                <i className=\"material-icons\"\n                                    onClick={()=>{unlikePost(item._id)}}\n                                >thumb_down</i>\n                                :\n                                \n                                <i className=\"material-icons\"\n                                    onClick={()=>{likePost(item._id)}}\n                                >thumb_up</i>\n                                }\n\n\n                                <div>未來分享按鈕</div>\n\n\n                                <h6>{item.likes.length} likes</h6>\n                                <h6>{item.title}</h6>\n                                <p>{item.body}</p>\n                                {\n                                    item.comments.map(record=>{\n                                        return(\n                                            <h6 key={record._id}><span style={{fontWeight:\"500\"}}>{record.postedBy.name}</span>{record.text}</h6>\n                                        )\n                                    })\n                                }\n                                <form onSubmit={(e)=>{\n                                    e.preventDefault()\n                                    makeComment(e.target[0].value,item._id)\n                                }}>\n                                    <input type=\"text\" placeholder=\"add a comment\"/>\n                                </form>\n                                \n                            </div>\n                        </div>\n                    )\n                })\n            }    \n        </div>\n    )\n}\n\nexport default Home","import React,{useState,useContext} from 'react'\nimport {UserContext} from '../../App'\nimport {Link,useHistory} from 'react-router-dom'\nimport M from 'materialize-css'\n\nconst SignIn = ()=>{\n\n        const {state,dispatch} = useContext(UserContext)\n        const history = useHistory();\n        const [password,setPassword] = useState(\"\")\n        const [email,setEmail] = useState(\"\")\n        const PostData = ()=>{\n            // console.log(email,password)\n            if(!/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email)){\n                M.toast({html: \"invalid email\",classes:\"#c62828 red darken-3\"})\n                return \n            }\n            fetch(\"/signin\",{\n                method:\"post\",\n                headers:{\n                    \"Content-Type\":\"application/json\"\n                },\n                body:JSON.stringify({\n                    password,\n                    email\n                })\n            }).then(res=>res.json())\n            .then(data=>{\n                // console.log(data)\n                if(data.error){\n                    M.toast({html: data.error,classes:\"#c62828 red darken-3\"})\n                }\n                else{\n                    localStorage.setItem(\"jwt\",data.token)\n                    localStorage.setItem(\"user\",JSON.stringify(data.user))\n                    dispatch({type:\"USER\",payload:data.user})\n                    M.toast({html:\"signedin success\",classes:\"#43a047 green darken-1\"})\n                    history.push('/')\n                }\n            }).catch(err=>{\n                console.log(err)\n            })\n        }\n    \n    return (\n        <div className=\"mycard\">\n             <div className=\"card auth-card input-field\">\n                <h2>Sheep Cloud</h2>\n                <input \n                type=\"text\"\n                placeholder=\"email\"\n                value={email}\n                onChange={(e)=>setEmail(e.target.value)}\n                />\n                <input \n                type=\"password\"\n                placeholder=\"password\"\n                value={password}\n                onChange={(e)=>setPassword(e.target.value)}\n                />\n                <button className=\"btn waves-effect waves-light #64b5f6 blue darken-1\" \n                onClick={()=>PostData(\"login\")}\n                >\n                    Login\n                </button>\n                {/* <button className=\"btn waves-effect waves-light #64b5f6 blue darken-1\" \n                onClick={()=>{\n                    PostData()\n                }}\n                >\n                    快速測試Login\n                </button> */}\n                <div>測試帳號 yale918@gmail.com / 12345</div>\n                <h5>\n                    <Link to=\"/signup\">Don't have an account ?</Link>\n                </h5>\n            </div>\n        </div>\n    )\n}\n\nexport default SignIn","import React, { useEffect, useState, useContext } from 'react'\nimport { UserContext } from '../../App'\n\nconst Profile = () => {\n  const [mypics, setPics] = useState([])\n  const { state, dispatch } = useContext(UserContext)\n  const [image, setImage] = useState(\"\")\n  const [url, setUrl] = useState(\"\")\n\n  useEffect(() => {\n\n    fetch('/mypost', {\n      headers: {\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      }\n    }).then(res => res.json())\n      .then(result => {\n        console.log(result)\n        setPics(result.mypost)\n      })\n  }, [])\n\n  useEffect(() => {\n    if (image) {\n      const data = new FormData()\n      data.append(\"file\", image)\n      data.append(\"upload_preset\", \"insta-clone\")\n      data.append(\"cloud_name\", \"yalecloud\")\n      fetch(\"https://api.cloudinary.com/v1_1/yalecloud/image/upload\", {\n        method: \"post\",\n        body: data\n      })\n        .then(res => res.json())\n        .then(data => {\n          //localStorage.setItem(\"user\",JSON.stringify({...state,pic:data.url}))\n          //dispatch({type:\"UPDATEPIC\",payload:data.url})\n          fetch('/updatepic',{\n            method:\"put\",\n            headers:{\n              \"Content-Type\":\"application/json\",\n              \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\n            },\n            body:JSON.stringify({\n              pic:data.url\n            })\n          }).then(res=>res.json())\n          .then(result=>{\n            console.log(result)\n            localStorage.setItem(\"user\",JSON.stringify({...state,pic:data.pic}))\n            dispatch({type:\"UPDATEPIC\",payload:result.pic})\n            //window.location.reload()\n          })\n          \n        })\n        .catch(err => {\n          console.log(err)\n        })\n    }\n  }, [image])\n\n  const updatePhoto = (file) => {\n    setImage(file)\n  }\n  return (\n    <div style={{ maxWidth: \"550px\", margin: \"0px auto\" }}>\n      <div style={{\n        margin: \"18px 0px\",\n        borderBottom: \"1px solid grey\"\n      }}>\n\n\n        <div style={{\n          display: \"flex\",\n          justifyContent: \"space-around\",\n        }}>\n          <div>\n            <img style={{ width: \"160px\", height: \"160px\", borderRadius: \"80px\" }}\n              src={state ? state.pic : \"loading\"}\n            />\n\n          </div>\n          <div>\n            <h4>{state ? state.name : \"loading\"}</h4>\n            <h5>{state ? state.email : \"loading\"}</h5>\n            <div style={{ display: \"flex\", justifyContent: \"space-between\", width: \"108%\" }}>\n              <h6>{mypics.length} posts</h6>\n              <h6>{state ? state.followers.length : \"0\"} followers</h6>\n              <h6>{state ? state.following.length : \"0\"} following</h6>\n            </div>\n\n          </div>\n        </div>\n\n        <div className=\"file-field input-field\" style={{ margin: \"10px\" }}>\n          <div className=\"btn #64b5f6 blue darken-1\">\n            <span>Update pic</span>\n            <input type=\"file\" onChange={(e) => updatePhoto(e.target.files[0])} />\n          </div>\n          <div className=\"file-path-wrapper\">\n            <input className=\"file-path validate\" type=\"text\" />\n          </div>\n        </div>\n      </div>\n      <div className=\"gallery\">\n        {\n          mypics.map(item => {\n            return (\n              <img key={item._id} className=\"item\" src={item.photo} alt={item.title}></img>\n\n            )\n          })\n        }\n\n\n      </div>\n    </div>\n  )\n}\n\nexport default Profile","import React, { useState, useEffect } from 'react'\nimport { Link, useHistory } from 'react-router-dom'\nimport M from 'materialize-css'\nconst SignIn = () => {\n  const history = useHistory();\n  const [name, setName] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [email, setEmail] = useState(\"\")\n  const [image, setImage] = useState(\"\")\n  const [url, setUrl] = useState(undefined)\n\n\n  useEffect(() => {\n    if (url) {\n      uploadFields()\n    }\n  }, [url])\n\n  const uploadPic = () => {\n    const data = new FormData()\n    data.append(\"file\", image)\n    data.append(\"upload_preset\", \"insta-clone\")\n    data.append(\"cloud_name\", \"yalecloud\")\n    fetch(\"https://api.cloudinary.com/v1_1/yalecloud/image/upload\", {\n      method: \"post\",\n      body: data\n    })\n      .then(res => res.json())\n      .then(data => {\n        setUrl(data.url)\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }\n\n  const uploadFields = () => {\n    if (!/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email)) {\n      M.toast({ html: \"invalid email\", classes: \"#c62828 red darken-3\" })\n      return\n    }\n    fetch(\"/signup\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        name,\n        password,\n        email,\n        pic:url\n      })\n    }).then(res => res.json())\n      .then(data => {\n        if (data.error) {\n          M.toast({ html: data.error, classes: \"#c62828 red darken-3\" })\n        }\n        else {\n          M.toast({ html: data.message, classes: \"#43a047 green darken-1\" })\n          history.push('/signin')\n        }\n      }).catch(err => {\n        console.log(err)\n      })\n  }\n\n  const PostData = () => {\n    if (image) {\n      uploadPic()\n    } else {\n      uploadFields()\n    }\n  }\n\n  return (\n    <div className=\"mycard\">\n      <div className=\"card auth-card input-field\">\n        <h2>Sheep Cloud</h2>\n        <input\n          type=\"text\"\n          placeholder=\"name\"\n          value={name}\n          onChange={(e) => {\n            setName(e.target.value)\n          }}\n          \n        />\n        <input\n          type=\"text\"\n          placeholder=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n        <input\n          type=\"password\"\n          placeholder=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <div className=\"file-field input-field\">\n          <div className=\"btn #64b5f6 blue darken-1\">\n            <span>Upload pic</span>\n            <input type=\"file\" onChange={(e) => setImage(e.target.files[0])} />\n          </div>\n          <div className=\"file-path-wrapper\">\n            <input className=\"file-path validate\" type=\"text\" />\n          </div>\n        </div>\n        <button className=\"btn waves-effect waves-light #64b5f6 blue darken-1\"\n          onClick={() => PostData()}\n        >\n          SignUP\n        </button>\n        <h5>\n          <Link to=\"/signin\">Already have an account ?</Link>\n        </h5>\n      </div>\n    </div>\n  )\n}\n\nexport default SignIn","import React,{useState,useEffect} from 'react'\nimport M from 'materialize-css'\nimport {useHistory} from 'react-router-dom'\n\nconst CreatePost = ()=>{\n    const history = useHistory()\n    const [title,setTitle] = useState(\"\")\n    const [body,setBody] = useState(\"\")\n    const [image,setImage] = useState(\"\")\n    const [url,setUrl] = useState(\"\")\n    useEffect(()=>{\n        if(url){\n        console.log(\"hi\")\n        fetch(\"/createpost\",{\n            method:\"post\",\n            headers:{\n                \"Content-Type\":\"application/json\",\n                \"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")\n            },\n            body:JSON.stringify({\n                title,\n                body,\n                pic:url\n            })\n        }).then(res=>res.json())\n        .then(data=>{\n\n            if(data.error){\n                M.toast({html: data.error,classes:\"#c62828 red darken-3\"})\n            }\n            else{\n                M.toast({html:\"created post successfully\",classes:\"#43a047 green darken-1\"})\n                history.push('/')\n            }\n        }).catch(err=>{\n            console.log(err)\n        })\n    }\n    },[url])\n\n    const postDetails = ()=>{\n        const data = new FormData()\n        data.append(\"file\",image)\n        data.append(\"upload_preset\",\"insta-clone\")\n        data.append(\"cloud_name\",\"yalecloud\")\n        fetch(\"https://api.cloudinary.com/v1_1/yalecloud/image/upload\" ,{\n            method:\"post\",\n            body:data\n        })\n        .then(res=>res.json())\n        .then(data=>{\n           setUrl(data.url)\n        })\n        .catch(err=>{\n            console.log(err)\n        })\n\n    }\n\n\n    return(\n        <div className=\"card input-filed\"\n        style={{\n            margin:\"30px auto\",\n            maxWidth:\"500px\",\n            padding:\"20px\",\n            textAlign:\"center\"\n        }}\n        >\n            <input \n            type=\"text\" \n            placeholder=\"title\"\n            value={title}\n            onChange={(e)=>setTitle(e.target.value)}\n            />\n            <input \n            type=\"text\" \n            placeholder=\"body\"\n            value={body}\n            onChange={(e)=>setBody(e.target.value)}\n            />\n            <div className=\"file-field input-field\">\n            <div className=\"btn #64b5f6 blue darken-1\">\n                <span>Upload Image</span>\n                <input type=\"file\" onChange={(e)=>setImage(e.target.files[0])}/>\n            </div>\n            <div className=\"file-path-wrapper\">\n                <input className=\"file-path validate\" type=\"text\" />\n            </div>\n            </div>\n            <button className=\"btn waves-effect waves-light #64b5f6 blue darken-1\" \n            onClick={()=>postDetails()}\n            >\n                    Submit post\n                </button>\n        </div>\n    )\n}\n\nexport default CreatePost","export const initialState = null\n\nexport const reducer = (state,action)=>{\n    if(action.type==\"USER\"){\n        return action.payload\n    }\n    if(action.type==\"CLEAR\"){\n        return null\n    }\n    if(action.type==\"UPDATE\"){\n      return {\n        ...state,\n        followers:action.payload.followers,\n        following:action.payload.following\n      }\n    }\n    if(action.type==\"UPDATEPIC\"){\n      return{\n        ...state,\n        pic:action.payload\n      }\n    }\n    return state\n}","import React, { useEffect, useState, useContext } from 'react'\nimport { UserContext } from '../../App'\nimport { useParams } from 'react-router-dom'\n\nconst Profile = () => {\n  const [userProfile, setProfile] = useState(null)\n  const { state, dispatch } = useContext(UserContext)\n  const { userid } = useParams()\n  const [showfollow, setShowFollow] = useState(state?!state.following.includes(userid):true)\n\n\n  //console.log(userid)\n  useEffect(() => {\n    fetch(`/user/${userid}`, {\n      headers: {\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      }\n    }).then(res => res.json())\n      .then(result => {\n        //console.log(result)\n\n        setProfile(result)\n      })\n  }, [])\n\n\n  const followUser = () => {\n    fetch('/follow', {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        followId: userid\n      })\n    }).then(res => res.json())\n      .then(data => {\n        console.log(data)\n        dispatch({ type: \"UPDATE\", payload: { following: data.following, followers: data.followers } })\n        localStorage.setItem(\"user\", JSON.stringify(data))\n\n        setProfile((prevState) => {\n          return {\n            ...prevState,\n            user: {\n              ...prevState.user,\n              followers: [...prevState.user.followers, data._id]\n            }\n          }\n        })\n        setShowFollow(false)\n      })\n  }\n\n  const unfollowUser = () => {\n    fetch('/unfollow', {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        unfollowId: userid\n      })\n    }).then(res => res.json())\n      .then(data => {\n\n        dispatch({ type: \"UPDATE\", payload: { following: data.following, followers: data.followers } })\n        localStorage.setItem(\"user\", JSON.stringify(data))\n        setProfile((prevState) => {\n          const newFollower = prevState.user.followers.filter(item=>item != data._id)\n          return {\n            ...prevState,\n            user: {\n              ...prevState.user,\n              followers: newFollower\n            }\n          }\n        })\n        setShowFollow(true)\n        \n      })\n  }\n\n\n  return (\n    <>\n      {userProfile ?\n        <div style={{ maxWidth: \"550px\", margin: \"0px auto\" }}>\n          <div style={{\n            display: \"flex\",\n            justifyContent: \"space-around\",\n            margin: \"18px 0px\",\n            borderBottom: \"1px solid grey\"\n          }}>\n            <div>\n              <img style={{ width: \"160px\", height: \"160px\", borderRadius: \"80px\" }}\n                src={userProfile.user.pic}\n              />\n            </div>\n            <div>\n              <h4>{userProfile.user.name}</h4>\n              <h5>{userProfile.user.email}</h5>\n              <div style={{ display: \"flex\", justifyContent: \"space-between\", width: \"108%\" }}>\n                <h6>{userProfile.posts.length} posts</h6>\n                <h6>{userProfile.user.followers.length} followers</h6>\n                <h6>{userProfile.user.following.length} following</h6>\n              </div>\n              {\n                showfollow ?\n                  <button style={{\n                    margin:\"10px\"\n                  }} \n                    className=\"btn waves-effect waves-light #64b5f6 blue darken-1\"\n                    onClick={() => followUser()}\n                  >\n                    Follow\n                  </button>\n                  :\n                  <button style={{\n                    margin:\"10px\"\n                  }} \n                    className=\"btn waves-effect waves-light #64b5f6 blue darken-1\"\n                    onClick={() => unfollowUser()}\n                  >\n                    UnFollow\n                  </button>\n              }\n\n\n\n            </div>\n          </div>\n\n          <div className=\"gallery\">\n            {\n              userProfile.posts.map(item => {\n                return (\n                  <img key={item._id} className=\"item\" src={item.photo} alt={item.title}></img>\n\n                )\n              })\n            }\n\n\n          </div>\n        </div>\n\n        : <h2>loading...!</h2>}\n\n    </>\n  )\n}\n\nexport default Profile","import React, { useState, useEffect, useContext } from 'react'\nimport { UserContext } from '../../App'\nimport { Link } from 'react-router-dom'\n\nconst Home = () => {\n  const [data, setData] = useState([])\n  const { state, dispatch } = useContext(UserContext)\n  useEffect(() => {\n    fetch('/getsubpost', {\n      headers: {\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      }\n    }).then(res => res.json())\n      .then(result => {\n        console.log(result)\n        setData(result.posts)\n      })\n  }, [])\n\n\n\n  const likePost = (id) => {\n    fetch('/like', {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        postId: id\n      })\n    }).then(res => res.json())\n      .then(result => {\n        //console.log(result)\n        const newData = data.map(item => {\n          if (item._id == result._id) {\n            return result\n          } else {\n            return item\n          }\n        })\n        setData(newData)\n      }).catch(err => {\n        console.log(err)\n      })\n  }\n\n\n  const unlikePost = (id) => {\n    fetch('/unlike', {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        postId: id\n      })\n    }).then(res => res.json())\n      .then(result => {\n        const newData = data.map(item => {\n          if (item._id == result._id) {\n            return result\n          } else {\n            return item\n          }\n        })\n        setData(newData)\n      }).catch(err => {\n        console.log(err)\n      })\n  }\n\n\n  const makeComment = (text, postId) => {\n    fetch('/comment', {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        postId,\n        text\n      })\n    }).then(res => res.json())\n      .then(result => {\n        console.log(result)\n        const newData = data.map(item => {\n          if (item._id == result._id) {\n            return result\n          } else {\n            return item\n          }\n        })\n        setData(newData)\n      }).catch(err => {\n        console.log(err)\n      })\n  }\n\n  const deletePost = (postid) => {\n    fetch(`/deletepost/${postid}`, {\n      method: \"delete\",\n      headers: {\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      }\n    }).then(res => res.json())\n      .then(result => {\n        console.log(result)\n        const newData = data.filter(item => {\n          return item._id !== result._id\n        })\n        setData(newData)\n      })\n  }\n\n\n\n  return (\n    <div className=\"home\">\n      {\n        data.map(item => {\n          return (\n            <div className=\"card home-card\" key={item._id}>\n\n              <h5 style={{padding:\"5px\"}}><Link to={item.postedBy._id !== state._id ? \"/profile/\" + item.postedBy._id : \"/profile\"}>{item.postedBy.name}</Link> {item.postedBy._id == state._id\n                && <i className=\"material-icons\" style={{\n                  float: \"right\"\n                }}\n                  onClick={() => deletePost(item._id)}\n                >delete</i>\n              }</h5>\n              <div className=\"card-image\">\n                <img src={item.photo} />\n              </div>\n              <div className=\"card-content\">\n                <i className=\"material-icons\" style={{ color: \"red\" }}>favorite</i>\n                {item.likes.includes(state._id)\n\n                  ?\n                  <i className=\"material-icons\"\n                    onClick={() => { unlikePost(item._id) }}\n                  >thumb_down</i>\n                  :\n\n                  <i className=\"material-icons\"\n                    onClick={() => { likePost(item._id) }}\n                  >thumb_up</i>\n                }\n\n\n\n                <h6>{item.likes.length} likes</h6>\n                <h6>{item.title}</h6>\n                <p>{item.body}</p>\n                {\n                  item.comments.map(record => {\n                    return (\n                      <h6 key={record._id}><span style={{ fontWeight: \"500\" }}>{record.postedBy.name}</span>{record.text}</h6>\n                    )\n                  })\n                }\n                <form onSubmit={(e) => {\n                  e.preventDefault()\n                  makeComment(e.target[0].value, item._id)\n                }}>\n                  <input type=\"text\" placeholder=\"add a comment\" />\n                </form>\n\n              </div>\n            </div>\n          )\n        })\n      }\n    </div>\n  )\n}\n\nexport default Home","import React,{useEffect,createContext,useReducer,useContext} from 'react'\nimport NavBar from './components/Navbar'\nimport \"./App.css\"\nimport {BrowserRouter,Route,Switch,useHistory} from 'react-router-dom'\nimport Home from './components/screens/Home'\nimport Signin from './components/screens/SignIn'\nimport Profile from './components/screens/Profile'\nimport Signup from './components/screens/Signup'\nimport CreatePost from './components/screens/CreatePost'\nimport { reducer,initialState } from './reducers/useReducer'\nimport UserProfile from './components/screens/UserProfile'\nimport SubscribeUserPosts from './components/screens/SubscribeUserPosts'\n\nexport const UserContext = createContext()\n\nconst Routing = ()=>{\n  const history = useHistory()\n  const {state,dispatch} = useContext(UserContext)\n  useEffect(()=>{\n    const user = JSON.parse(localStorage.getItem(\"user\"))\n    if(user){\n      dispatch({type:\"USER\", payload:user})\n    }else{\n      // console.log(\"********** in App.js useEffect before history push **************\")\n      history.push('/signin')\n    }\n  },[])\n  return(\n    <Switch>\n      <Route exact path=\"/\">\n        <Home />\n      </Route>\n      <Route path=\"/signin\">\n        <Signin />\n      </Route>\n      <Route path=\"/signup\">\n        <Signup />\n      </Route>\n      <Route exact path=\"/profile\">\n        <Profile />\n      </Route>\n      <Route path=\"/create\">\n        <CreatePost />\n      </Route>\n      <Route path=\"/profile/:userid\">\n        <UserProfile />\n      </Route>\n      <Route path=\"/myfollowingpost\">\n        <SubscribeUserPosts />\n      </Route>\n    </Switch>\n  )\n}\n\nfunction App() {\n  const [state,dispatch] = useReducer(reducer, initialState)\n  return (\n    <UserContext.Provider value={{state,dispatch}}>\n      <BrowserRouter>\n        <NavBar />\n        <Routing />\n      </BrowserRouter>\n    </UserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();"],"sourceRoot":""}